% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/auth.R
\name{secretmanager_auth}
\alias{secretmanager_auth}
\title{Authenticate with Google Secret Manager}
\usage{
secretmanager_auth(
  email = gargle::gargle_oauth_email(),
  path = NULL,
  scopes = "https://www.googleapis.com/auth/secretmanager",
  cache = gargle::gargle_oauth_cache(),
  use_oob = gargle::gargle_oob_default(),
  token = NULL
)
}
\arguments{
\item{email}{Optional. The email address of the Google identity you want to
authenticate with. Useful for selecting a specific account if you have
multiple, or for non-interactive authentication. If \code{NULL}, gargle will
try to obtain it from the \code{"gargle_oauth_email"} option or allow you to
choose from a list in interactive sessions. See \code{\link[gargle:gargle_options]{gargle::gargle_oauth_email()}}
for more details.}

\item{path}{Optional. Path to a service account token (JSON file) or a
pre-existing token. If provided, this will be used for authentication
instead of the OAuth flow. See \code{\link[gargle:token_fetch]{gargle::token_fetch()}} for details on
accepted formats.}

\item{scopes}{The OAuth scopes to request. For Secret Manager, a common scope is
\code{"https://www.googleapis.com/auth/secretmanager"} or the broader
\code{"https://www.googleapis.com/auth/cloud-platform"}. Defaults to
\code{"https://www.googleapis.com/auth/secretmanager"}.}

\item{cache}{The location of the OAuth token cache. Defaults to
\code{\link[gargle:gargle_options]{gargle::gargle_oauth_cache()}}.}

\item{use_oob}{Whether to prefer "out-of-band" (OOB) authentication. Defaults to
\code{\link[gargle:gargle_options]{gargle::gargle_oob_default()}}. Useful for non-interactive sessions where
a browser cannot be easily launched.}

\item{token}{A pre-existing token object (e.g., from \code{httr::Token2.0} or
another \code{gargle}-using package). If provided, this token will be used directly.}
}
\value{
Invisibly returns \code{NULL}. The main effect is to configure authentication
state for the package.
}
\description{
This function handles authentication with Google Cloud Secret Manager. It's
called automatically when the first token is needed, or it can be called
directly by the user to pre-authenticate or to switch identities, scopes,
or authentication methods (e.g., user OAuth, service account token).

Following \code{gargle} best practices for sensitive APIs, \code{secretmanager} does
\strong{not} come with a built-in OAuth client or API key. You must configure
your own via \code{\link[=secretmanager_auth_configure]{secretmanager_auth_configure()}} or provide a service account
token via the \code{path} argument.
}
\examples{
\dontrun{
# To configure your own OAuth client (do this once per project/user):
secretmanager_auth_configure(
 path = "/path/to/your/oauth-client-secret.json"
)

# Authenticate (often not needed explicitly, called by API functions):
secretmanager_auth()

# Authenticate with a specific user:
secretmanager_auth(email = "my_user@example.com")

# Authenticate using a service account:
secretmanager_auth(path = "/path/to/your/service-account-key.json")

# Authenticate using a pre-fetched token (like googleCloudStorageR example):
token <- gargle::token_fetch(
  scopes = "https://www.googleapis.com/auth/cloud-platform"
)
secretmanager_auth(token = token)
}
}
